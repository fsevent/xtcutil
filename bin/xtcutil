#!/usr/bin/ruby

require 'pp'

module Xtcutil
  module_function

  def main_help(argv)
    puts <<'End'
usage:
  xtcutil help
  xtcutil show file.xtc
  xtcutil image file.xtc
  xtcutil parse-tree file.xtc
End
  end

  def main(argv)
    if argv.empty?
      argv.unshift 'help'
    end
    subcommand = argv.shift
    case subcommand
    when 'help'
      main_help(argv)
    when 'graph'
      require 'xtcutil/cmd_graph'; Xtcutil::CmdGraph.new.main(argv)
    when 'show'
      require 'xtcutil/cmd_show'; Xtcutil::CmdShow.new.main(argv)
    when 'image'
      require 'xtcutil/cmd_image'; Xtcutil::CmdImage.new.main(argv)
    when 'parse-tree'
      require 'xtcutil/cmd_parse_tree'; Xtcutil::CmdParseTree.new.main(argv)
    else
      $stderr.print "unexpected subcommand: #{subcommand}"
      exit false
    end
  end
end

Xtcutil.main ARGV
