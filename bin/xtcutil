#!/usr/bin/ruby

require 'pp'

module Xtcutil
  module_function

  def help_main(argv)
    puts <<'End'
usage:
  xtcutil help
  xtcutil graph file.xtc
  xtcutil window file.xtc
  xtcutil image file.xtc
  xtcutil parse-tree file.xtc
End
  end

  def main(argv)
    if argv.empty?
      argv.unshift 'help'
    end
    subcommand = argv.shift
    case subcommand
    when 'help'
      help_main(argv)
    when 'graph'
      require 'xtcutil/cmd_graph'; Xtcutil.graph_main(argv)
    when 'window'
      require 'xtcutil/cmd_window'; Xtcutil.window_main(argv)
    when 'image'
      require 'xtcutil/cmd_image'; Xtcutil.image_main(argv)
    when 'parse-tree'
      require 'xtcutil/cmd_parse_tree'; Xtcutil.parse_tree_main(argv)
    else
      $stderr.puts "unexpected subcommand: #{subcommand} (use \"xtcutil help\" to list subcommands)"
      exit false
    end
  end
end

Xtcutil.main ARGV
